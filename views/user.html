<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="UTF-8">
    <title>用户权限系统</title>
    <link rel="stylesheet" href="lib/bootstrap.min.css" />
    <link rel="stylesheet" href="lib/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="lib/multi-select.css">
    <link rel="stylesheet" href="css/user.css">


</head>

<body ng-app="upms">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/">地图数据平台</a>
                <p class="navbar-text">用户权限管理系统（UPMS）</p>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/upms/role.html">角色管理</a></li>
                    <li><a href="/upms/user.html">员工管理</a></li>
                    <li><a href="/upms/permission.html">权限管理</a></li>
                    <li id="loginli" style="cursor: hand;"><a id="login">登录</a></li>
                    <li id="currentUserDropdown" class="dropdown">
                        <a id="currentUser" class="dropdown-toggle" data-toggle="dropdown">用户名<span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a>修改密码</a></li>
                            <li class="divider"></li>
                            <li><a id="logout">退出</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container" ng-controller="UserController">
        <div class="row">
            <div class="btn-toolbar" role="toolbar" style="margin-bottom:20px">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createUser">
                        添加用户
                    </button>
                    <button type="button" class="btn btn-primary" ng-click="deleteuser()">
                        删除用户
                    </button>
                    <button type="button" class="btn btn-primary" ng-click="deleteuser()">
                        修改用户
                    </button>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createUser">
                        设置权限
                    </button>
                </div>
            </div>
        </div>
        <div class="row">
            <div id="ztree" class="col-md-4"></div>
            <table class="table table-bordered table-hover col-md-8">
                <tr>
                    <th class="checkboxth">
                        <input type="checkbox">
                    </th>
                    <th>序号</th>
                    <th>名称</th>
                    <th>QQ号码</th>
                    <th>角色</th>
                    <th>编号</th>

                </tr>
                <tr ng-repeat="user in users">
                    <td>
                        <input type="checkbox" ng-model="user.checked">
                    </td>
                    <td>{{$index+1}}</td>
                    <td>{{user.Name}}</td>
                    <td>{{user.QQ}}</td>
                    <td><span ng-repeat="role in user.Roles">{{ role.Name + "," }}</span></td>
                    <td>{{user.ID}}</td>
                </tr>
            </table>
        </div>
    </div>


    <div class="modal fade" id="createUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">添加用户</h4>
                </div>
                <div class="modal-body">
                    <form class="form">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <lable class="control-label">姓名：</lable>
                                    <input ng-model="createuserdata.name" type="text" class="form-control create-user-text">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <lable class="control-label">QQ：</lable>
                                    <input ng-model="createuserdata.qq" type="text" class="form-control create-user-text">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <lable class="form-label">系统平台：</lable>
                                    <div class="input-group input-group-sm create-user-form">
                                        <input id="newPlatformText" type="text" class="form-control">
                                        <span class="input-group-btn">
                                            <input class="btn btn-default" type="button" onClick="newPlatform();" value="新增平台"> 
                                        </span>
                                    </div>
                                    <select id="platformselect" multiple='multiple'>

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <lable class="form-label">角色：</lable>
                                    <div class="input-group input-group-sm create-user-form">
                                        <input id="newRoleText" type="text" class="form-control">
                                        <span class="input-group-btn">
                                            <input class="btn btn-default" type="button" onClick="newRole();" value="新增角色"> 
                                        </span>
                                    </div>
                                    <select id="roleselect" multiple='multiple'>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" ng-click="createuser();">保存</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="updateUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">添加用户</h4>
                </div>
                <div class="modal-body">
                    <form class="form">
                        <div class="form-group">
                            <lable class="control-label">姓名：</lable>
                            <input ng-model="createuserdata.name" type="text" class="form-control">

                            <lable class="control-label">QQ：</lable>
                            <input ng-model="createuserdata.qq" type="text" class="form-control">
                        </div>
                        <div class="form-group">
                            <lable class="form-label">系统平台：</lable>
                            <select name="role" id="" class="form-control">
                                <option value="" class="form-control">公交</option>
                                <option value="" class="form-control">室内图</option>
                                <option value="" class="form-control">道路</option>
                            </select>

                            <lable class="form-label">角色：</lable>
                            <select name="role" id="" class="form-control">
                                <option value="" class="form-control">管理员</option>
                                <option value="" class="form-control">质检员</option>
                                <option value="" class="form-control">作业员</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" ng-click="createuser();">保存</button>
                </div>
            </div>
        </div>
    </div>
</body>

<script src="lib/jquery.min.js"></script>
<script type="text/javascript" src="lib/bootstrap.min.js"></script>
<script type="text/javascript" src="lib/angular.min.js"></script>
<script type="text/javascript" src="lib/jquery.multi-select.js"></script>
<script type="text/javascript" src="js/user.js"></script>

</html>